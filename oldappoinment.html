<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker.min.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <!-- JS files  -->
     
    <style type="text/css">
      .tbd tr:first-child td{border-top:transparent !important;}
       @font-face {
       font-family: Butler;
       src: url('font/Butler_Bold.OTF');
       }
       ._loading{float:right;display: none;}
       ._mxicon{}
    </style>


    <title>Home</title>
  </head>
  <body>

    <section class="header_wrap">
      <div class="navigation-wrap start-header start-style">
        <div class="container-fluid">
          <div class="row">
            <div class="col-12">
              <nav class="navbar navbar-expand-md navbar-light">  
                
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav mr-auto py-4 py-md-0">
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                      <a class="nav-link" href="#">Home</a>
                    </li>
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4 active">
                      <a class="nav-link" href="new-booking.html">New Booking</a>
                    </li>
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                      <a class="nav-link" href="active.html">Active</a>
                    </li>
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                      <a class="nav-link" href="dispatched.html">Dispatched</a>
                    </li>
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                      <a class="nav-link" href="pre-booking.html">Pre Booking</a>
                    </li>
              
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                      <a class="nav-link" href="drivers.html">Drivers</a>
                    </li>
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                      <a class="nav-link" href="#">Earnings</a>
                    </li>
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                      <a class="nav-link" href="#">Customers</a>
                    </li>
                    <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                      <a class="nav-link" href="search.html">Search</a>
                    </li>
                  </ul>
                </div>
               <a class="navbar-brand" href="appoinment.html"><img src="img/callcenter.png" alt=""></a>
             
                <a class="navbar-brand" href="#"><img src="img/Artboard 17.png" alt=""></a>
                <div class="profile_user">  
                  <span>
                    <img src="img/testimonialimage4.jpg">
                  </span>
                  <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Rahul Kumar
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <a class="dropdown-item" href="login.html">Logout</a>
                    </div>
                  </div>
                </div>
                
              </nav>    
            </div>
          </div>
        </div>
      </div>
    </section>
<section class="inner_s_wrap">
<div class="container">
<div class="row">
  <div class="col-lg-12">
    <div class="main-box clearfix">
      <div class="table-responsive">
        <table class="table user-list">
         <!--- <thead>
            <tr>
              <th><span>User</span></th>
              <th ><span>Created</span></th>
              <th class="text-center"><span>Status</span></th>
              <th><span>Email</span></th>
              <th class="text-center"><span>Action</span></th>
            </tr>
          </thead>--->
          <tbody id="tbd">  
            
            
           
          </tbody>
        </table>
      </div>
      <ul class="pagination pull-right">
        <li><a href="#"><i class="fa fa-chevron-left"></i></a></li>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">5</a></li>
        <li><a href="#"><i class="fa fa-chevron-right"></i></a></li>
      </ul>
    </div>
  </div>
</div>
</div>
    </section>
    <div style="display:none">
    </div>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
 <script>
 	window._baseurl="http://18.168.83.39/";
      $(function(){
      	
      myajax( {"api":"allappointments"},function( data, textStatus, jQxhr ){
         var _clone;
         var tbd=$("#tbd");
         $(data.data).each(function(x,y){


         	_clone ='<tr id="rowax"><td>'
         	_clone+='<img style="height:50px;" class="_profilepic" src="'+window._baseurl+y.image+'" alt="">';
         	_clone+='<a href="#" class="user-link _name">'+y.name+'</a>';
            _clone+='<span class="user-subhead _username">'+y.username+'</span></td>';
            _clone+='<td class="_createdate">'+y.createdate+' '+y.createtime+'</td>';
            _clone+='<td style="width: 23%;">';
            _clone+='<img   src="img/load.gif" class="_loading">';
		    _clone+='<a  href="drivers.php?id='+y.uid+'" class="accept _mxicon">View</a>';

            _clone+='<a style="display:none" href="javascript:void(0)" data-id="'+y.uid+'" onclick="accept(this)" class="accept _mxicon"> <span><img src="img/accept.png" alt=""></span></a>';
            _clone+='<a style="display:none"  href="javascript:void(0)" data-id="'+y.uid+'"  class="deny _mxicon"><span><img src="img/close.png" alt=""></span></a>';
            _clone+='    </td> </tr>';
          
         	tbd.append(_clone);
         })
    });
      });
      window.accept=function(ref){
      	if(confirm("Do you want to accept?")) 
      	{
      		var id=$(ref).attr("data-id");
      		$(ref).parent().find("._loading").show();
      		$(ref).parent().find("._mxicon").hide();
      		 myajax({"api":"updateappointmentsatus","uid":id,"status":"1"},function( data, textStatus, jQxhr ){
      		 	if(data.status=="200"){
      		 		window.location.href="drivers.php?id="+id;
      		 	}
      		 	else{
      		 		$(ref).parent().find("._loading").hide();
      		        $(ref).parent().find("._mxicon").show();
      		 		alert("Please Try Again");
      		 	}
      		 });
       }
      	}
      window.myajax=function(_obj,fnc){
      	  $.ajax({
    url: 'api.php',
    dataType: 'json',
    type: 'post',
    contentType: 'application/json',
    data: JSON.stringify(_obj),
    processData: false,
    success: fnc,
    error: function( jqXhr, textStatus, errorThrown ){
        console.log( errorThrown );
    }
});
      }



    </script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/js/bootstrap-datepicker.min.js"></script>
   

  </body>
</html>